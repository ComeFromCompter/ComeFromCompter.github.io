<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>亿特博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="亿特博客">
<meta property="og:url" content="http://www.bigademo.com/page/2/index.html">
<meta property="og:site_name" content="亿特博客">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="亿特博客">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="亿特博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">Tony</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客首页</a></li>
                        
                            <li><a href="/archives">文章</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=PAkNDgsKBQ4MCnxNTRJfU1E" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/luuman" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="https://www.zhihu.com/people/luuman" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/lishangmou" title="weibo">weibo</a>
                            
                                <a class="fl google" target="_blank" href="http://i.youku.com/shangmou" title="google">google</a>
                            
                                <a class="fl twitter" target="_blank" href="http://twitter.com/luuman" title="twitter">twitter</a>
                            
                                <a class="fl facebook" target="_blank" href="#" title="facebook">facebook</a>
                            
                                <a class="fl rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/5-App/" style="font-size: 15px;">5+ App</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/android-studio/" style="font-size: 10px;">android studio</a> <a href="/tags/markdown/" style="font-size: 12.5px;">markdown</a> <a href="/tags/wordpress/" style="font-size: 12.5px;">wordpress</a> <a href="/tags/百度语音/" style="font-size: 10px;">百度语音</a> <a href="/tags/网址/" style="font-size: 10px;">网址</a> <a href="/tags/自定义view/" style="font-size: 17.5px;">自定义view</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://MOxFIVE.github.io/">MOxFIVE</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.vsay.cn/">DoubleV</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.ccwebsite.com/">兮兮</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.dandyweng.com/">翁天信</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.plqblog.com/views/index.php">潘利强</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.hankin.cn/">hankin技术宅</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">90后，水瓶座普通男青年！爱折腾，爱运动，更爱游离于错综复杂的编码与逻辑中，无法自拔。</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Tony</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Tony</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客首页</a></li>
                
                    <li><a href="/archives">文章</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=PAkNDgsKBQ4MCnxNTRJfU1E" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/luuman" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/luuman" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/lishangmou" title="weibo">weibo</a>
                    
                        <a class="google" target="_blank" href="http://i.youku.com/shangmou" title="google">google</a>
                    
                        <a class="twitter" target="_blank" href="http://twitter.com/luuman" title="twitter">twitter</a>
                    
                        <a class="facebook" target="_blank" href="#" title="facebook">facebook</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-android-e8-ae-be-e7-bd-aetextview-e4-b8-ad-e5-88-92-e7-ba-bf-e6-95-88-e6-9e-9c" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/17/android-e8-ae-be-e7-bd-aetextview-e4-b8-ad-e5-88-92-e7-ba-bf-e6-95-88-e6-9e-9c/" class="article-date">
      <time datetime="2015-11-17T06:34:18.000Z" itemprop="datePublished">2015-11-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/17/android-e8-ae-be-e7-bd-aetextview-e4-b8-ad-e5-88-92-e7-ba-bf-e6-95-88-e6-9e-9c/">android 设置textview中划线效果</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="中划线"><a href="#中划线" class="headerlink" title="中划线"></a>中划线</h2><pre><code>textview.getPaint().setFlags(Paint. STRIKE_THRU_TEXT_FLAG );
`&lt;/pre&gt;

## 底部加横线是

&lt;pre&gt;`textview.getPaint().setFlags(Paint. UNDERLINE_TEXT_FLAG );
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-android-e5-bc-80-e5-8f-91-e4-b9-8bfragment-e7-9a-84-e7-94-9f-e5-91-bd-e5-91-a8-e6-9c-9f" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/04/android-e5-bc-80-e5-8f-91-e4-b9-8bfragment-e7-9a-84-e7-94-9f-e5-91-bd-e5-91-a8-e6-9c-9f/" class="article-date">
      <time datetime="2015-11-04T14:28:48.000Z" itemprop="datePublished">2015-11-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/04/android-e5-bc-80-e5-8f-91-e4-b9-8bfragment-e7-9a-84-e7-94-9f-e5-91-bd-e5-91-a8-e6-9c-9f/">android开发之Fragment的生命周期</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>就像activities一样，fragments也有它们自己的生命周期。理解fragments的生命周期，可以使你在它们被销毁的时候保存它们的实例，这样在它们重新被创建的时候，就能恢复它们之前的状态。下面的例子测试了fragments的不同状态</p>
<h2 id="创建一个Fragment的子类：Fragment1-java。"><a href="#创建一个Fragment的子类：Fragment1-java。" class="headerlink" title="创建一个Fragment的子类：Fragment1.java。"></a>创建一个Fragment的子类：Fragment1.java。</h2><pre><code>public class Fragment1 extends Fragment {  
    @Override  
    public View onCreateView(LayoutInflater inflater, ViewGroup container,  
            Bundle savedInstanceState) {  

        Log.d(&quot;Fragment 1&quot;, &quot;onCreateView&quot;);  

        // ---Inflate the layout for this fragment---  
        return inflater.inflate(R.layout.fragment1, container, false);  
    }  

    @Override  
    public void onAttach(Activity activity) {  
        super.onAttach(activity);  
        Log.d(&quot;Fragment 1&quot;, &quot;onAttach&quot;);  
    }  

    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        Log.d(&quot;Fragment 1&quot;, &quot;onCreate&quot;);  
    }  

    @Override  
    public void onActivityCreated(Bundle savedInstanceState) {  
        super.onActivityCreated(savedInstanceState);  
        Log.d(&quot;Fragment 1&quot;, &quot;onActivityCreated&quot;);  
    }  

    @Override  
    public void onStart() {  
        super.onStart();  
        Log.d(&quot;Fragment 1&quot;, &quot;onStart&quot;);  
    }  

    @Override  
    public void onResume() {  
        super.onResume();  
        Log.d(&quot;Fragment 1&quot;, &quot;onResume&quot;);  
    }  

    @Override  
    public void onPause() {  
        super.onPause();  
        Log.d(&quot;Fragment 1&quot;, &quot;onPause&quot;);  
    }  

    @Override  
    public void onStop() {  
        super.onStop();  
        Log.d(&quot;Fragment 1&quot;, &quot;onStop&quot;);  
    }  

    @Override  
    public void onDestroyView() {  
        super.onDestroyView();  
        Log.d(&quot;Fragment 1&quot;, &quot;onDestroyView&quot;);  
    }  

    @Override  
    public void onDestroy() {  
        super.onDestroy();  
        Log.d(&quot;Fragment 1&quot;, &quot;onDestroy&quot;);  
    }  

    @Override  
    public void onDetach() {  
        super.onDetach();  
        Log.d(&quot;Fragment 1&quot;, &quot;onDetach&quot;);  
    }  
}  
`&lt;/pre&gt;

## 2\. 按Ctrl+F11，将模拟器转换成“横屏模式”。

## 3\. 按F11调试。

## 4\. 当应用被加载的时候，LogCat窗口中有如下显示。

&lt;pre&gt;`03-27 12:23:32.255: D/Fragment 1(704): onAttach  
03-27 12:23:32.255: D/Fragment 1(704): onCreate  
03-27 12:23:32.255: D/Fragment 1(704): onCreateView  
03-27 12:23:32.274: D/Fragment 1(704): onActivityCreated  
03-27 12:23:32.274: D/Fragment 1(704): onStart  
03-27 12:23:32.286: D/Fragment 1(704): onResume  
`&lt;/pre&gt;

## 5\. 按Home键，LogCat窗口中有如下显示。

&lt;pre&gt;`03-27 12:25:23.174: D/Fragment 1(704): onPause  
03-27 12:25:25.174: D/Fragment 1(704): onStop  
`&lt;/pre&gt;

## 6.按Home键不放，重新进入应用，LogCat窗口中有如下显示。

&lt;pre&gt;`03-27 12:26:21.505: D/Fragment 1(704): onStart  
03-27 12:26:21.505: D/Fragment 1(704): onResume 
`&lt;/pre&gt;

## 7\. 按返回键，LogCat窗口中有如下显示。

&lt;pre&gt;`03-27 12:27:54.384: D/Fragment 1(704): onPause  
03-27 12:27:55.324: D/Fragment 1(704): onStop  
03-27 12:27:55.324: D/Fragment 1(704): onDestroyView  
03-27 12:27:55.324: D/Fragment 1(704): onDestroy  
03-27 12:27:55.324: D/Fragment 1(704): onDetach
</code></pre><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><ol>
<li>当一个fragment被创建的时候，它会经历以下状态.。<br>onAttach()<br>onCreate()<br>onCreateView()<br>onActivityCreated()</li>
<li>当这个fragment对用户可见的时候，它会经历以下状态。<br>onStart()<br>onResume()</li>
<li>当这个fragment进入“后台模式”的时候，它会经历以下状态。<br>onPause()<br>onStop()</li>
<li>当这个fragment被销毁了（或者持有它的activity被销毁了），它会经历以下状态。<br>onPause()<br>onStop()<br>onDestroyView()<br>onDestroy() // 本来漏掉类这个回调，感谢xiangxue336提出。<br>onDetach()</li>
<li>就像activitie一样，在以下的状态中，可以使用Bundle对象保存一个fragment的对象。<br>onCreate()<br>onCreateView()<br>onActivityCreated()</li>
<li>fragments的大部分状态都和activitie很相似，但fragment有一些新的状态。<br>onAttached() —— 当fragment和activity关联之后，调用这个方法。<br>onCreateView() —— 创建fragment中的视图的时候，调用这个方法。<br>onActivityCreated() —— 当activity的onCreate()方法被返回之后，调用这个方法。<br>onDestroyView() —— 当fragment中的视图被移除的时候，调用这个方法。<br>onDetach() —— 当fragment和activity分离的时候，调用这个方法。 ##</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-android-e8-87-aa-e5-ae-9a-e4-b9-89-e6-8e-a7-e4-bb-b6-e4-b9-8b-e5-80-92-e8-ae-a1-e6-97-b6-e6-8e-a7-e4-bb-b6" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/03/android-e8-87-aa-e5-ae-9a-e4-b9-89-e6-8e-a7-e4-bb-b6-e4-b9-8b-e5-80-92-e8-ae-a1-e6-97-b6-e6-8e-a7-e4-bb-b6/" class="article-date">
      <time datetime="2015-11-03T07:31:51.000Z" itemprop="datePublished">2015-11-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/03/android-e8-87-aa-e5-ae-9a-e4-b9-89-e6-8e-a7-e4-bb-b6-e4-b9-8b-e5-80-92-e8-ae-a1-e6-97-b6-e6-8e-a7-e4-bb-b6/">android自定义控件之倒计时控件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <pre><code>import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Paint;
import android.text.Html;
import android.util.AttributeSet;
import android.widget.TextView;

public class TimerTextView extends TextView implements Runnable{

    public TimerTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    private long mday, mhour, mmin, msecond;//天，小时，分钟，秒
    private boolean run=false; //是否启动了

    public void setTimes(long[] times) {
        mday = times[0];
        mhour = times[1];
        mmin = times[2];
        msecond = times[3];

    }

    /**
     * 倒计时计算
     */
    private void ComputeTime() {
        msecond--;
        if (msecond &amp;lt; 0) {
            mmin--;
            msecond = 59;
            if (mmin &amp;lt; 0) {
                mmin = 59;
                mhour--;
                if (mhour &amp;lt; 0) {
                    // 倒计时结束，一天有24个小时
                    mhour = 23;
                    mday--;

                }
            }

        }

    }

    public boolean isRun() {
        return run;
    }

    public void beginRun() {
        this.run = true;
        run();
    }

    public void stopRun(){
        this.run = false;
    }

    @Override
    public void run() {
        //标示已经启动
        if(run){
            ComputeTime();

            String strTime= mday +&quot;天:&quot;+ mhour+&quot;小时:&quot;+ mmin+&quot;分钟:&quot;+msecond+&quot;秒&quot;;
            this.setText(strTime);

            postDelayed(this, 1000);
        }else {
            removeCallbacks(this);
        }
    }

}
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-e5-ae-89-e5-8d-93-e5-ba-94-e7-94-a8app-e5-8f-91-e5-b8-83-e8-87-b3-e5-90-84-e5-a4-a7-e5-b9-b3-e5-8f-b0-e6-b1-87-e6-80-bb" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/31/e5-ae-89-e5-8d-93-e5-ba-94-e7-94-a8app-e5-8f-91-e5-b8-83-e8-87-b3-e5-90-84-e5-a4-a7-e5-b9-b3-e5-8f-b0-e6-b1-87-e6-80-bb/" class="article-date">
      <time datetime="2015-10-31T03:16:05.000Z" itemprop="datePublished">2015-10-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/31/e5-ae-89-e5-8d-93-e5-ba-94-e7-94-a8app-e5-8f-91-e5-b8-83-e8-87-b3-e5-90-84-e5-a4-a7-e5-b9-b3-e5-8f-b0-e6-b1-87-e6-80-bb/">安卓应用App发布至各大平台汇总</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>应用汇：<a href="http://www.appchina.com/" target="_blank" rel="external">http://www.appchina.com/</a></p>
<p>安智市场：<a href="http://www.anzhi.com/" target="_blank" rel="external">http://www.anzhi.com/</a></p>
<p>华为市场：<a href="http://appstore.huawei.com/" target="_blank" rel="external">http://appstore.huawei.com/</a></p>
<p>百度市场：<a href="http://app.baidu.com/pass/center" target="_blank" rel="external">http://app.baidu.com/pass/center</a></p>
<p>蒲公英：<a href="http://www.pgyer.com" target="_blank" rel="external">http://www.pgyer.com</a><br>N多网 ：<a href="http://www.nduoa.com/developer" target="_blank" rel="external">http://www.nduoa.com/developer</a></p>
<p>豌豆荚：<a href="http://developer.wandoujia.com/" target="_blank" rel="external">http://developer.wandoujia.com/</a></p>
<p>360: <a href="http://dev.360.cn" target="_blank" rel="external">http://dev.360.cn</a></p>
<p>QQ: <a href="http://op.open.qq.com" target="_blank" rel="external">http://op.open.qq.com</a><br>FIR: <a href="http://fir.im" target="_blank" rel="external">http://fir.im</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-android-e5-b8-b8-e7-94-a8-e5-9b-be-e7-89-87-e6-a1-86-e6-9e-b6-e4-b9-8bpicasso" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/android-e5-b8-b8-e7-94-a8-e5-9b-be-e7-89-87-e6-a1-86-e6-9e-b6-e4-b9-8bpicasso/" class="article-date">
      <time datetime="2015-10-21T12:37:55.000Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/android-e5-b8-b8-e7-94-a8-e5-9b-be-e7-89-87-e6-a1-86-e6-9e-b6-e4-b9-8bpicasso/">android常用图片框架之Picasso</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>今天在写项目的时候，要把网络图片显示在app中，原来一直使用Xutil的BitmapUtils。可是这回服务端给我返回的图片有问题（除了目标图片还有其他的图片图片在一张图里），因此我就需要把裁剪一下，可是xutils的缓存图片不是图片格式的，我需要把缓存图片先转换为图片格式，再裁剪，步骤繁琐。</p>
<p>一直都知道有Picasso的这个图片框架，在查看了资料以后，用这个框架实现了上述获取网络图片，并截取，再显示的问题。具体使用方法如下。由于是为了自己朝花夕拾，所以就不解释了。</p>
<pre><code>package com.bxs.schoollife.adapter;

import android.content.Context;
import android.graphics.Bitmap;
import android.os.Environment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.bxs.schoollife.Bean.OrganizeSortBean;
import com.bxs.schoollife.R;
import com.bxs.schoollife.action.GetUserInfoFromSharePre;
import com.lidroid.xutils.bitmap.BitmapGlobalConfig;
import com.squareup.picasso.Picasso;
import com.squareup.picasso.Transformation;

import java.io.File;
import java.util.List;

/**
 * Created by Tony on 2015-10-13.
 */
public class OrganizeSortAdapter extends BaseAdapter implements Transformation {
    private Context context;
    private List&amp;lt;OrganizeSortBean&amp;gt; organizeSortBeanList;
    private LayoutInflater mInflater;
    private BitmapGlobalConfig globalConfig;
    private String filePath;

    public OrganizeSortAdapter(Context context, List&amp;lt;OrganizeSortBean&amp;gt; organizeSortBeanList) {
        this.context = context;
        this.organizeSortBeanList = organizeSortBeanList;
        mInflater = LayoutInflater.from(context);
        filePath = Environment.getExternalStorageDirectory() + &quot;/schollife/&quot;;//该文件夹位于/storag/emulated/0下
        try {

            File file1 = new File(filePath);
            //判断文件夹是否存在，如果不存在就新建一个
            if (!file1.exists()) {
                file1.mkdirs();
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public int getCount() {
        return organizeSortBeanList == null ? 0 : organizeSortBeanList.size();
    }

    @Override
    public Object getItem(int position) {
        return organizeSortBeanList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolder = null;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.sl_fragment_organize_sort_item, null);
            viewHolder = new ViewHolder(convertView);
            convertView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }
        Picasso.with(context).load(GetUserInfoFromSharePre.getImagePath(context) + organizeSortBeanList.get(position).getPic()).transform(this ).into(viewHolder.imgViewOrganizeSort);

        viewHolder.tvOrganizeSortName.setText(organizeSortBeanList.get(position).getName());
        return convertView;
    }

    @Override
    public Bitmap transform(Bitmap source) {
        Bitmap result = Bitmap.createBitmap(source, 53, 35, 120, 120);
        if (result != source) {
            source.recycle();
        }

        return result;
    }

    @Override
    public String key() {
        return &quot;square()&quot;;
    }

    private class ViewHolder {
        ImageView imgViewOrganizeSort;
        TextView tvOrganizeSortName;

        ViewHolder(View view) {
            imgViewOrganizeSort = (ImageView) view.findViewById(R.id.imgVew_organize_image);
            tvOrganizeSortName = (TextView) view.findViewById(R.id.tv_organize_name);
        }
    }
}
</code></pre><h2 id="其中在使用transform（）的方法后，就不能再使用resize（）的方法了"><a href="#其中在使用transform（）的方法后，就不能再使用resize（）的方法了" class="headerlink" title="其中在使用transform（）的方法后，就不能再使用resize（）的方法了"></a>其中在使用transform（）的方法后，就不能再使用resize（）的方法了</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-xutils-e4-b8-ad-e7-9a-84bitmaputils-e5-85-a8-e9-9d-a2-e6-b3-a8-e9-87-8a" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/xutils-e4-b8-ad-e7-9a-84bitmaputils-e5-85-a8-e9-9d-a2-e6-b3-a8-e9-87-8a/" class="article-date">
      <time datetime="2015-10-21T08:01:08.000Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/xutils-e4-b8-ad-e7-9a-84bitmaputils-e5-85-a8-e9-9d-a2-e6-b3-a8-e9-87-8a/">xUtils 中的BitmapUtils 全面注释</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <pre><code>/**
 * 加载图片工具类
 * @author afu
 *
 */
public class BitmapUtils implements TaskHandler {

    /**
     * 判断任务是否暂停
     */
    private boolean pauseTask = false;
    /**
     * 是否取消所有任务
     */
    private boolean cancelAllTask = false;
    private final Object pauseTaskLock = new Object();

    /**
     * Android上下文
     */
    private Context context;
    private BitmapGlobalConfig globalConfig;
    private BitmapDisplayConfig defaultDisplayConfig;

    /////////////////////////////////////////////// create ///////////////////////////////////////////////////
    /**
     * 
     * @param context 上下文
     */
    public BitmapUtils(Context context) {
        this(context, null);
    }

    /**
     * 
     * @param context 上下文
     * @param diskCachePath 磁盘高速缓存路径
     */
    public BitmapUtils(Context context, String diskCachePath) {
        if (context == null) {
            throw new IllegalArgumentException(&quot;context may not be null&quot;);
        }

        this.context = context.getApplicationContext();
        globalConfig = BitmapGlobalConfig.getInstance(this.context, diskCachePath);
        defaultDisplayConfig = new BitmapDisplayConfig();
    }

    /**
     * 
     * @param context 上下文
     * @param diskCachePath 磁盘高速缓存路径
     * @param memoryCacheSize 内存缓存空间大小
     */
    public BitmapUtils(Context context, String diskCachePath, int memoryCacheSize) {
        this(context, diskCachePath);
        globalConfig.setMemoryCacheSize(memoryCacheSize);
    }

    /**
     * 
     * @param context 上下文
     * @param diskCachePath 磁盘高速缓存路径
     * @param memoryCacheSize 内存缓存空间大小
     * @param diskCacheSize 磁盘高速缓存空间大小
     */
    public BitmapUtils(Context context, String diskCachePath, int memoryCacheSize, int diskCacheSize) {
        this(context, diskCachePath);
        globalConfig.setMemoryCacheSize(memoryCacheSize);
        globalConfig.setDiskCacheSize(diskCacheSize);
    }

    /**
     * 
     * @param context 上下文
     * @param diskCachePath 磁盘高速缓存路径
     * @param memoryCachePercent 内存缓存百分比
     */
    public BitmapUtils(Context context, String diskCachePath, float memoryCachePercent) {
        this(context, diskCachePath);
        globalConfig.setMemCacheSizePercent(memoryCachePercent);
    }

    /**
     * 
     * @param context 上下文
     * @param diskCachePath  磁盘高速缓存路径
     * @param memoryCachePercent 内存缓存百分比
     * @param diskCacheSize 磁盘缓存空间大小
     */
    public BitmapUtils(Context context, String diskCachePath, float memoryCachePercent, int diskCacheSize) {
        this(context, diskCachePath);
        globalConfig.setMemCacheSizePercent(memoryCachePercent);
        globalConfig.setDiskCacheSize(diskCacheSize);
    }

    //////////////////////////////////////// config  配置////////////////////////////////////////////////////////////////////

    /**
     * 配置默认加载drawable类型资源图片
     * @param drawable
     * @return
     */
    public BitmapUtils configDefaultLoadingImage(Drawable drawable) {
        defaultDisplayConfig.setLoadingDrawable(drawable);
        return this;
    }

    /**
     * 配置默认加载资源id类型资源图片
     * @param resId
     * @return
     */
    public BitmapUtils configDefaultLoadingImage(int resId) {
        defaultDisplayConfig.setLoadingDrawable(context.getResources().getDrawable(resId));
        return this;
    }

    /**
     * 配置默认加载图片
     * @param bitmap bitmap类中的资源图片
     * @return
     */
    public BitmapUtils configDefaultLoadingImage(Bitmap bitmap) {
        defaultDisplayConfig.setLoadingDrawable(new BitmapDrawable(context.getResources(), bitmap));
        return this;
    }

    /**
     * 设置默认加载失败的图片
     * @param drawable drawable类型的资源图片
     * @return
     */
    public BitmapUtils configDefaultLoadFailedImage(Drawable drawable) {
        defaultDisplayConfig.setLoadFailedDrawable(drawable);
        return this;
    }

    /**
     * 配置默认加载失败图片，加载id类型资源图片
     * @param resId
     * @return
     */
    public BitmapUtils configDefaultLoadFailedImage(int resId) {
        defaultDisplayConfig.setLoadFailedDrawable(context.getResources().getDrawable(resId));
        return this;
    }

    /**
     * 配置默认加载失败图片，加载Bitmap类型资源图片
     * @param bitmap
     * @return
     */
    public BitmapUtils configDefaultLoadFailedImage(Bitmap bitmap) {
        defaultDisplayConfig.setLoadFailedDrawable(new BitmapDrawable(context.getResources(), bitmap));
        return this;
    }

    /**
     * 配置默认图片最大宽和高
     * @param maxWidth 最大宽
     * @param maxHeight 最大高
     * @return
     */
    public BitmapUtils configDefaultBitmapMaxSize(int maxWidth, int maxHeight) {
        defaultDisplayConfig.setBitmapMaxSize(new BitmapSize(maxWidth, maxHeight));
        return this;
    }

    /**
     * 配置默认位图最大图片参数
     * @param maxSize 最大图片参数类
     * @return
     */
    public BitmapUtils configDefaultBitmapMaxSize(BitmapSize maxSize) {
        defaultDisplayConfig.setBitmapMaxSize(maxSize);
        return this;
    }

    /**
     * 配置默认图片加载动画
     * @param animation 动画
     * @return
     */
    public BitmapUtils configDefaultImageLoadAnimation(Animation animation) {
        defaultDisplayConfig.setAnimation(animation);
        return this;
    }

    /**
     * 配置默认自动旋转动画
     * @param autoRotation
     * @return
     */
    public BitmapUtils configDefaultAutoRotation(boolean autoRotation) {
        defaultDisplayConfig.setAutoRotation(autoRotation);
        return this;
    }

    /**
     * 配置默认是否显示原始图片
     * @param showOriginal true:显示原始图片，false：将会对图片压缩处理
     * @return
     */
    public BitmapUtils configDefaultShowOriginal(boolean showOriginal) {
        defaultDisplayConfig.setShowOriginal(showOriginal);
        return this;
    }

    /**
     * 配置默认图片配置，传入Bitmap.Config类型
     * @param config
     * @return
     */
    public BitmapUtils configDefaultBitmapConfig(Bitmap.Config config) {
        defaultDisplayConfig.setBitmapConfig(config);
        return this;
    }

    /**
     * 配置默认显示配置
     * @param displayConfig
     * @return
     */
    public BitmapUtils configDefaultDisplayConfig(BitmapDisplayConfig displayConfig) {
        defaultDisplayConfig = displayConfig;
        return this;
    }

    /**
     * 配置下载参数
     * @param downloader
     * @return
     */
    public BitmapUtils configDownloader(Downloader downloader) {
        globalConfig.setDownloader(downloader);
        return this;
    }

    /**
     * 配置默认缓存失效
     * @param defaultExpiry
     * @return
     */
    public BitmapUtils configDefaultCacheExpiry(long defaultExpiry) {
        globalConfig.setDefaultCacheExpiry(defaultExpiry);
        return this;
    }

    /**
     * 配置默认链接时间超时时间
     * @param connectTimeout  毫秒单位
     * @return
     */
    public BitmapUtils configDefaultConnectTimeout(int connectTimeout) {
        globalConfig.setDefaultConnectTimeout(connectTimeout);
        return this;
    }

    /**
     * 配置默认读取超时时间
     * @param readTimeout 毫秒
     * @return
     */
    public BitmapUtils configDefaultReadTimeout(int readTimeout) {
        globalConfig.setDefaultReadTimeout(readTimeout);
        return this;
    }

    /**
     * 配置线程池多少
     * @param threadPoolSize 线程池数
     * 此参数没有设置，默认是设置5个核心线程池
     * @return
     */
    public BitmapUtils configThreadPoolSize(int threadPoolSize) {
        globalConfig.setThreadPoolSize(threadPoolSize);
        return this;
    }

    /**
     * 配置内存缓存是否启用，默认是启用的
     * @param enabled
     * @return
     */
    public BitmapUtils configMemoryCacheEnabled(boolean enabled) {
        globalConfig.setMemoryCacheEnabled(enabled);
        return this;
    }

    /**
     * 配置磁盘缓存功能，默认是启用的
     * @param enabled
     * @return
     */
    public BitmapUtils configDiskCacheEnabled(boolean enabled) {
        globalConfig.setDiskCacheEnabled(enabled);
        return this;
    }

    /**
     * 配置原始磁盘缓存文件名称
     * @param fileNameGenerator
     * @return
     */
    public BitmapUtils configDiskCacheFileNameGenerator(FileNameGenerator fileNameGenerator) {
        globalConfig.setFileNameGenerator(fileNameGenerator);
        return this;
    }

    /**
     * 配置位图缓存监听
     * @param listener
     * @return
     */
    public BitmapUtils configBitmapCacheListener(BitmapCacheListener listener) {
        globalConfig.setBitmapCacheListener(listener);
        return this;
    }

    ////////////////////////// display  显示////////////////////////////////////

    /**
     * 根据图片路径，显示到具体的View上
     * @param container 要把图片显示到的View
     * @param uri 图片路径
     */
    public &amp;lt;T extends View&amp;gt; void display(T container, String uri) {
        display(container, uri, null, null);
    }

    /**
     * 根据图片路径，显示到具体的View上
     * @param container 要把图片显示到的View
     * @param uri 图片路径
     * @param displayConfig
     */
    public &amp;lt;T extends View&amp;gt; void display(T container, String uri, BitmapDisplayConfig displayConfig) {
        display(container, uri, displayConfig, null);
    }

    /**
     * 根据图片路径，显示到具体的View上
     * @param container 要把图片显示到的View
     * @param uri 图片路径
     * @param callBack 加载过程回调各种状态
     */
    public &amp;lt;T extends View&amp;gt; void display(T container, String uri, BitmapLoadCallBack&amp;lt;T&amp;gt; callBack) {
        display(container, uri, null, callBack);
    }

    /**
     * 根据图片路径，显示到具体的View上
     * @param container 要把图片显示到的View
     * @param uri 图片路径
     * @param displayConfig 位图显示配置
     * @param callBack
     */
    public &amp;lt;T extends View&amp;gt; void display(T container, String uri, BitmapDisplayConfig displayConfig, BitmapLoadCallBack&amp;lt;T&amp;gt; callBack) {
        if (container == null) {
            return;
        }

        if (callBack == null) {
            callBack = new DefaultBitmapLoadCallBack&amp;lt;T&amp;gt;();
        }

        if (displayConfig == null || displayConfig == defaultDisplayConfig) {
            displayConfig = defaultDisplayConfig.cloneNew();
        }

        // Optimize Max Size
        BitmapSize size = displayConfig.getBitmapMaxSize();
        displayConfig.setBitmapMaxSize(BitmapCommonUtils.optimizeMaxSizeByView(container, size.getWidth(), size.getHeight()));

        container.clearAnimation();

        if (TextUtils.isEmpty(uri)) {
            callBack.onLoadFailed(container, uri, displayConfig.getLoadFailedDrawable());
            return;
        }

        // start loading
        callBack.onPreLoad(container, uri, displayConfig);

        // find bitmap from mem cache.
        Bitmap bitmap = globalConfig.getBitmapCache().getBitmapFromMemCache(uri, displayConfig);

        if (bitmap != null) {
            callBack.onLoadStarted(container, uri, displayConfig);
            callBack.onLoadCompleted(
                    container,
                    uri,
                    bitmap,
                    displayConfig,
                    BitmapLoadFrom.MEMORY_CACHE);
        } else if (!bitmapLoadTaskExist(container, uri, callBack)) {

            final BitmapLoadTask&amp;lt;T&amp;gt; loadTask = new BitmapLoadTask&amp;lt;T&amp;gt;(container, uri, displayConfig, callBack);

            // get executor
            PriorityExecutor executor = globalConfig.getBitmapLoadExecutor();
            File diskCacheFile = this.getBitmapFileFromDiskCache(uri);
            boolean diskCacheExist = diskCacheFile != null &amp;amp;&amp;amp; diskCacheFile.exists();
            if (diskCacheExist &amp;amp;&amp;amp; executor.isBusy()) {
                executor = globalConfig.getDiskCacheExecutor();
            }
            // set loading image
            Drawable loadingDrawable = displayConfig.getLoadingDrawable();
            callBack.setDrawable(container, new AsyncDrawable&amp;lt;T&amp;gt;(loadingDrawable, loadTask));

            loadTask.setPriority(displayConfig.getPriority());
            loadTask.executeOnExecutor(executor);
        }
    }

    /////////////////////////////////////////////// cache  缓存相关/////////////////////////////////////////////////////////////////

    /**
     * 清除内存和磁盘缓存
     */
    public void clearCache() {
        globalConfig.clearCache();
    }

    /**
     * 清除内存缓存
     */
    public void clearMemoryCache() {
        globalConfig.clearMemoryCache();
    }

    /**
     * 清除磁盘缓存
     */
    public void clearDiskCache() {
        globalConfig.clearDiskCache();
    }

    /**
     * 根据uri清除内存缓存和磁盘缓存
     * @param uri
     */
    public void clearCache(String uri) {
        globalConfig.clearCache(uri);
    }

    /**
     * 根据uri清除内存缓存
     * @param uri
     */
    public void clearMemoryCache(String uri) {
        globalConfig.clearMemoryCache(uri);
    }

    /**
     * 根据uri清除磁盘缓存
     * @param uri
     */
    public void clearDiskCache(String uri) {
        globalConfig.clearDiskCache(uri);
    }

    /**
     * 刷新缓存
     */
    public void flushCache() {
        globalConfig.flushCache();
    }

    /**
     * 关闭缓存
     */
    public void closeCache() {
        globalConfig.closeCache();
    }

    /**
     * 根据uri从磁盘缓存得到位图文件
     * @param uri
     * @return
     */
    public File getBitmapFileFromDiskCache(String uri) {
        return globalConfig.getBitmapCache().getBitmapFileFromDiskCache(uri);
    }

    /**
     * 根据uri和位图显示配置从磁盘缓存得到位图文件
     * @param uri
     * @param config
     * @return
     */
    public Bitmap getBitmapFromMemCache(String uri, BitmapDisplayConfig config) {
        if (config == null) {
            config = defaultDisplayConfig;
        }
        return globalConfig.getBitmapCache().getBitmapFromMemCache(uri, config);
    }

    ////////////////////////////////////////// tasks  任务//////////////////////////////////////////////////////////////////////

    /**
     * 支持暂停
     */
    @Override
    public boolean supportPause() {
        return true;
    }

    /**
     * 支持重新开始
     */
    @Override
    public boolean supportResume() {
        return true;
    }

    /**
     * 支持取消
     */
    @Override
    public boolean supportCancel() {
        return true;
    }

    /**
     * 暂停
     */
    @Override
    public void pause() {
        pauseTask = true;
        flushCache();
    }

    /**
     * 刷新
     */
    @Override
    public void resume() {
        pauseTask = false;
        synchronized (pauseTaskLock) {
            pauseTaskLock.notifyAll();
        }
    }

    /**
     * 取消
     */
    @Override
    public void cancel() {
        pauseTask = true;
        cancelAllTask = true;
        synchronized (pauseTaskLock) {
            pauseTaskLock.notifyAll();
        }
    }

    /**
     * 是否暂停
     */
    @Override
    public boolean isPaused() {
        return pauseTask;
    }

    /**
     * 是否是取消了
     */
    @Override
    public boolean isCancelled() {
        return cancelAllTask;
    }

    ////////////////////////////////////////////////下面这些方法是否没有提供给开发者使用的///////////////////////////////////////////////////////////////

    @SuppressWarnings(&quot;unchecked&quot;)
    private static &amp;lt;T extends View&amp;gt; BitmapLoadTask&amp;lt;T&amp;gt; getBitmapTaskFromContainer(T container, BitmapLoadCallBack&amp;lt;T&amp;gt; callBack) {
        if (container != null) {
            final Drawable drawable = callBack.getDrawable(container);
            if (drawable instanceof AsyncDrawable) {
                final AsyncDrawable&amp;lt;T&amp;gt; asyncDrawable = (AsyncDrawable&amp;lt;T&amp;gt;) drawable;
                return asyncDrawable.getBitmapWorkerTask();
            }
        }
        return null;
    }

    private static &amp;lt;T extends View&amp;gt; boolean bitmapLoadTaskExist(T container, String uri, BitmapLoadCallBack&amp;lt;T&amp;gt; callBack) {
        final BitmapLoadTask&amp;lt;T&amp;gt; oldLoadTask = getBitmapTaskFromContainer(container, callBack);

        if (oldLoadTask != null) {
            final String oldUrl = oldLoadTask.uri;
            if (TextUtils.isEmpty(oldUrl) || !oldUrl.equals(uri)) {
                oldLoadTask.cancel(true);
            } else {
                return true;
            }
        }
        return false;
    }

    public class BitmapLoadTask&amp;lt;T extends View&amp;gt; extends PriorityAsyncTask&amp;lt;Object, Object, Bitmap&amp;gt; {
        private final String uri;
        private final WeakReference&amp;lt;T&amp;gt; containerReference;
        private final BitmapLoadCallBack&amp;lt;T&amp;gt; callBack;
        private final BitmapDisplayConfig displayConfig;

        private BitmapLoadFrom from = BitmapLoadFrom.DISK_CACHE;

        public BitmapLoadTask(T container, String uri, BitmapDisplayConfig config, BitmapLoadCallBack&amp;lt;T&amp;gt; callBack) {
            if (container == null || uri == null || config == null || callBack == null) {
                throw new IllegalArgumentException(&quot;args may not be null&quot;);
            }

            this.containerReference = new WeakReference&amp;lt;T&amp;gt;(container);
            this.callBack = callBack;
            this.uri = uri;
            this.displayConfig = config;
        }

        @Override
        protected Bitmap doInBackground(Object... params) {

            synchronized (pauseTaskLock) {
                while (pauseTask &amp;amp;&amp;amp; !this.isCancelled()) {
                    try {
                        pauseTaskLock.wait();
                        if (cancelAllTask) {
                            return null;
                        }
                    } catch (Throwable e) {
                    }
                }
            }

            Bitmap bitmap = null;

            // get cache from disk cache
            if (!this.isCancelled() &amp;amp;&amp;amp; this.getTargetContainer() != null) {
                this.publishProgress(PROGRESS_LOAD_STARTED);
                bitmap = globalConfig.getBitmapCache().getBitmapFromDiskCache(uri, displayConfig);
            }

            // download image
            if (bitmap == null &amp;amp;&amp;amp; !this.isCancelled() &amp;amp;&amp;amp; this.getTargetContainer() != null) {
                bitmap = globalConfig.getBitmapCache().downloadBitmap(uri, displayConfig, this);
                from = BitmapLoadFrom.URI;
            }

            return bitmap;
        }

        public void updateProgress(long total, long current) {
            this.publishProgress(PROGRESS_LOADING, total, current);
        }

        private static final int PROGRESS_LOAD_STARTED = 0;
        private static final int PROGRESS_LOADING = 1;

        @Override
        protected void onProgressUpdate(Object... values) {
            if (values == null || values.length == 0) return;

            final T container = this.getTargetContainer();
            if (container == null) return;

            switch ((Integer) values[0]) {
                case PROGRESS_LOAD_STARTED:
                    callBack.onLoadStarted(container, uri, displayConfig);
                    break;
                case PROGRESS_LOADING:
                    if (values.length != 3) return;
                    callBack.onLoading(container, uri, displayConfig, (Long) values[1], (Long) values[2]);
                    break;
                default:
                    break;
            }
        }

        @Override
        protected void onPostExecute(Bitmap bitmap) {
            final T container = this.getTargetContainer();
            if (container != null) {
                if (bitmap != null) {
                    callBack.onLoadCompleted(
                            container,
                            this.uri,
                            bitmap,
                            displayConfig,
                            from);
                } else {
                    callBack.onLoadFailed(
                            container,
                            this.uri,
                            displayConfig.getLoadFailedDrawable());
                }
            }
        }

        @Override
        protected void onCancelled(Bitmap bitmap) {
            synchronized (pauseTaskLock) {
                pauseTaskLock.notifyAll();
            }
        }

        public T getTargetContainer() {
            final T container = containerReference.get();
            final BitmapLoadTask&amp;lt;T&amp;gt; bitmapWorkerTask = getBitmapTaskFromContainer(container, callBack);

            if (this == bitmapWorkerTask) {
                return container;
            }

            return null;
        }
    }
}
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-android-e4-bd-bf-e7-94-a8-e8-87-aa-e5-ae-9a-e4-b9-89progressdialog-e5-8f-91-e7-94-9funable-to-add-window-token-android-os-binderproxy406ab4c8-is-not-valid-is-your-activity-running" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/07/android-e4-bd-bf-e7-94-a8-e8-87-aa-e5-ae-9a-e4-b9-89progressdialog-e5-8f-91-e7-94-9funable-to-add-window-token-android-os-binderproxy406ab4c8-is-not-valid-is-your-activity-running/" class="article-date">
      <time datetime="2015-10-07T11:02:09.000Z" itemprop="datePublished">2015-10-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/07/android-e4-bd-bf-e7-94-a8-e8-87-aa-e5-ae-9a-e4-b9-89progressdialog-e5-8f-91-e7-94-9funable-to-add-window-token-android-os-binderproxy406ab4c8-is-not-valid-is-your-activity-running/">android 使用自定义ProgressDialog发生Unable to add window -- token android.os.BinderProxy@406ab4c8 is not valid; is your activity running?</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>在开发androidApp的时候，使用到了自定义的progressDialog，主要用于异步网络请求。</p>
<h3 id="MyProgressDialog-class"><a href="#MyProgressDialog-class" class="headerlink" title="MyProgressDialog.class"></a>MyProgressDialog.class</h3><pre><code>package com.bxs.makoarea.view;

import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.widget.ImageView;

import com.bxs.makoarea.R;

public class MyProgressDialog extends ProgressDialog {
    private static MyProgressDialog mProgressDialog = null;
    private static Context context = null;
    public static final int createProgress=0x100;
    public static final int dissProgress=0x101;
public static Handler proHandler = new Handler(){
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what){
            case createProgress:
                context = (Context) msg.obj;
                createDialog(context);
                break;
            case dissProgress:
                context = (Context) msg.obj;
                dismissDialog();
        }
    }
};
    public MyProgressDialog(Context context) {
        super(context);
        this.context = context;
    }

    public MyProgressDialog(Context context, int theme) {
        super(context, theme);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maco_progress_dialog);

    }

    public static MyProgressDialog createDialog(Context context) {

        mProgressDialog = new MyProgressDialog(context,
                R.style.CustomProgressDialog);
        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
        return mProgressDialog;
    }

    public static MyProgressDialog dismissDialog() {
        mProgressDialog.dismiss();
        return mProgressDialog;

    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        if (mProgressDialog == null) {
            return;
        }
        ImageView mImgView = (ImageView) MyProgressDialog.this
                .findViewById(R.id.imgView_progress_dialog);
        AnimationDrawable anim = (AnimationDrawable) mImgView.getBackground();
        anim.start();
    }
    public static final int DISMISSDIALOG=0x00000099;
    public static final Handler mHandler = new Handler(){
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what){
                case DISMISSDIALOG:
                    MyProgressDialog.dismissDialog();
                    break;
            }
        }
    };
}

`&lt;/pre&gt;

### MyActivity.class(有问题的)

&lt;pre&gt;`/**
     * 获取附近的商家
     */
    private void getNearShopperFromServer() {
        listShoppers = new ArrayList&amp;lt;Shopper&amp;gt;();
        User user = GetUserInfoFromSharePre.getUserInfoFromSharePre(this);
        RequestParams params = new RequestParams();
        params.put(&quot;id&quot;, user.getId());
        params.put(&quot;token&quot;, user.getToken());
        params.put(&quot;latitude&quot;, latitude);
        params.put(&quot;longitude&quot;, longitude);

        HttpUtil.get(URLList.search_enterpress, params, new JsonHttpResponseHandler() {
            @Override
            public void onStart() {

                    MyProgressDialog.createDialog(MyActivity.this);

            }

            @Override
            public void onSuccess(int statusCode, Header[] headers, JSONObject response) {
                Log.i(&quot;info&quot;, &quot;--jsonObject---&quot; + response);
                if (&quot;1&quot;.equals(response.optString(&quot;code&quot;))) {
                    JSONArray jsonArr = response.optJSONArray(&quot;data&quot;);
                    for (int i = 0; i &amp;lt; jsonArr.length(); i++) {
                        Shopper shopper = new Shopper();
                        JSONObject jsonObj = jsonArr.optJSONObject(i);
                        shopper.setId(jsonObj.optString(&quot;id&quot;));
                        shopper.setDistance(jsonObj.optString(&quot;distance&quot;));
                        shopper.setHead_img(jsonObj.optString(&quot;header_img&quot;));
                        shopper.setShopperName(jsonObj.optString(&quot;username&quot;));
                        shopper.setAddress(jsonObj.optString(&quot;address&quot;));
                        shopper.setShoperLongitude(jsonObj.optString(&quot;longitude&quot;));
                        shopper.setShopperLatitude(jsonObj.optString(&quot;latitude&quot;));
                        listShoppers.add(shopper);
                    }

                    initNearMaco();

                } else if (&quot;100&quot;.equals(response.optString(&quot;code&quot;))) {
                    MyApplication.getInstance().forceExit(NearMacoSmallActivity.this);
                }

            MyProgressDialog.dismissDialog();

            }

            @Override
            public void onFailure(int statusCode, Header[] headers, String responseString, Throwable throwable) {
                // TODO Auto-generated method stub
                Toast.makeText(NearMacoSmallActivity.this, &quot;网络异常，稍后再试&quot;, Toast.LENGTH_SHORT).show();
                MyProgressDialog.dismissDialog();

            }
        });

    }
`&lt;/pre&gt;

### MyActivity.class(修改过的)

&lt;pre&gt;`    /**
     * 获取附近的商家
     */
    private void getNearShopperFromServer() {
        listShoppers = new ArrayList&amp;lt;Shopper&amp;gt;();
        User user = GetUserInfoFromSharePre.getUserInfoFromSharePre(this);
        RequestParams params = new RequestParams();
        params.put(&quot;id&quot;, user.getId());
        params.put(&quot;token&quot;, user.getToken());
        params.put(&quot;latitude&quot;, latitude);
        params.put(&quot;longitude&quot;, longitude);

        HttpUtil.get(URLList.search_enterpress, params, new JsonHttpResponseHandler() {
            @Override
            public void onStart() {
                if (!isFinishing()) {
                    Message   msg = new Message();
                    msg.obj=NearMacoSmallActivity.this;
                    msg.what = MyProgressDialog.createProgress;

                    MyProgressDialog.proHandler.sendMessage(msg);

                }

            }

            @Override
            public void onSuccess(int statusCode, Header[] headers, JSONObject response) {
                Log.i(&quot;info&quot;, &quot;--jsonObject---&quot; + response);
                if (&quot;1&quot;.equals(response.optString(&quot;code&quot;))) {
                    JSONArray jsonArr = response.optJSONArray(&quot;data&quot;);
                    for (int i = 0; i &amp;lt; jsonArr.length(); i++) {
                        Shopper shopper = new Shopper();
                        JSONObject jsonObj = jsonArr.optJSONObject(i);
                        shopper.setId(jsonObj.optString(&quot;id&quot;));
                        shopper.setDistance(jsonObj.optString(&quot;distance&quot;));
                        shopper.setHead_img(jsonObj.optString(&quot;header_img&quot;));
                        shopper.setShopperName(jsonObj.optString(&quot;username&quot;));
                        shopper.setAddress(jsonObj.optString(&quot;address&quot;));
                        shopper.setShoperLongitude(jsonObj.optString(&quot;longitude&quot;));
                        shopper.setShopperLatitude(jsonObj.optString(&quot;latitude&quot;));
                        listShoppers.add(shopper);
                    }

                    initNearMaco();

                } else if (&quot;100&quot;.equals(response.optString(&quot;code&quot;))) {
                    MyApplication.getInstance().forceExit(NearMacoSmallActivity.this);
                }
                Message   msg = new Message();
                msg.obj=NearMacoSmallActivity.this;
                msg.what=MyProgressDialog.dissProgress;
MyProgressDialog.proHandler.sendMessage(msg);

            }

            @Override
            public void onFailure(int statusCode, Header[] headers, String responseString, Throwable throwable) {
                // TODO Auto-generated method stub
                Toast.makeText(NearMacoSmallActivity.this, &quot;网络异常，稍后再试&quot;, Toast.LENGTH_SHORT).show();
                Message   msg = new Message();
                msg.obj=NearMacoSmallActivity.this;
                msg.what=MyProgressDialog.dissProgress;
                MyProgressDialog.proHandler.sendMessage(msg);

            }
        });

    }
</code></pre><h2 id="主要是将onStart-onSuccess-onFailure-中的MyProgressDialog使用handler来处理"><a href="#主要是将onStart-onSuccess-onFailure-中的MyProgressDialog使用handler来处理" class="headerlink" title="主要是将onStart() ,onSuccess(),onFailure()中的MyProgressDialog使用handler来处理"></a>主要是将<em>onStart() ,onSuccess(),onFailure()</em>中的MyProgressDialog使用handler来处理</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-351" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/06/351/" class="article-date">
      <time datetime="2015-10-06T10:01:43.000Z" itemprop="datePublished">2015-10-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/06/351/">351</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>第一种实现的基本原理就是，当按下BACK键时，会被onKeyDown捕获，判断是BACK键，则执行exit方法。<br>在exit方法中，会首先判断isExit的值，如果为false的话，则置为true，同时会弹出提示，并在2000毫秒（2秒）后发出一个消息，在Handler中将此值还原成false。如果在发送消息间隔的2秒内，再次按了BACK键，则再次执行exit方法，此时isExit的值已为true，则会执行退出的方法。</p>
<pre><code>public class MainActivity extends Activity {

    // 定义一个变量，来标识是否退出
    private static boolean isExit = false;

    Handler mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            isExit = false;
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            exit();
            return false;
        }
        return super.onKeyDown(keyCode, event);
    }

    private void exit() {
        if (!isExit) {
            isExit = true;
            Toast.makeText(getApplicationContext(), &quot;再按一次退出程序&quot;,
                    Toast.LENGTH_SHORT).show();
            // 利用handler延迟发送更改状态信息
            mHandler.sendEmptyMessageDelayed(0, 2000);
        } else {
            finish();
            System.exit(0);
        }
    }

}
`&lt;/pre&gt;

第二种实现方式,通过记录按键时间计算时间差实现：

&lt;pre&gt;`public class MainActivity extends Activity {

    private long exitTime = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            exit();
            return false;
        }
        return super.onKeyDown(keyCode, event);
    }

    public void exit() {
        if ((System.currentTimeMillis() - exitTime) &amp;gt; 2000) {
            Toast.makeText(getApplicationContext(), &quot;再按一次退出程序&quot;,
                    Toast.LENGTH_SHORT).show();
            exitTime = System.currentTimeMillis();
        } else {
            finish();
            System.exit(0);
        }
    }

}
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-android-e6-8e-a7-e4-bb-b6expandablelistview" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/04/android-e6-8e-a7-e4-bb-b6expandablelistview/" class="article-date">
      <time datetime="2015-10-04T14:49:04.000Z" itemprop="datePublished">2015-10-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/04/android-e6-8e-a7-e4-bb-b6expandablelistview/">android控件ExpandableListView</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>1、首次加载全部展开：</p>
<pre><code>mDownloadListView.setAdapter(mDownloadAdapter);
        for (int i = 0; i &amp;lt; downloadGroup.size(); i++) {
            mDownloadListView.expandGroup(i);
        }
`&lt;/pre&gt;

提醒：加载前别忘了判断adapter是否为空和有没有Group数据哦、

2、不能点击收缩：

&lt;pre&gt;`mDownloadListView.setOnGroupClickListener(new OnGroupClickListener() {

            @Override
            public boolean onGroupClick(ExpandableListView parent, View v,
                    int groupPosition, long id) {
                // TODO Auto-generated method stub
                return true;
            }
        });
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-android-ui-e8-ae-be-e8-ae-a1-textview-e6-8e-a7-e4-bb-b6" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/04/android-ui-e8-ae-be-e8-ae-a1-textview-e6-8e-a7-e4-bb-b6/" class="article-date">
      <time datetime="2015-10-04T00:56:24.000Z" itemprop="datePublished">2015-10-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/04/android-ui-e8-ae-be-e8-ae-a1-textview-e6-8e-a7-e4-bb-b6/">Android UI 设计——TextView 控件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>TextView这个可以说是Android中最简单的一个控件了。该控件主要用来显示一段文字。</p>
<p>其中控件的显示设置也很简单，这里简单说一下重要的几个，控件的id，layout_weigth（宽度），layout_height（高度），text（显示文字内容）等都是比较常用和简单的设置，不在详细描述。</p>
<p>（1）文字的编辑</p>
<p>设置文本的大小，颜色有两种方式：一种是通过在layout中的布局文件中设置；另一种是在Activity中的onCreate方法中进行设置。</p>
<p>xml文件设置</p>
<p>设置文字的内容为“消息”，大小为“20sp”（文字的单位一般采用sp），颜色是“黑色”，文字对其方式是“居中”。</p>
<pre class="lang:xhtml decode:true ">&lt;TextView
            android:id="@+id/textView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="消息"
            android:textSize="20sp"
            android:textColor="#000000"
            android:gravity="center"/&gt;</pre>

<p>Activity中的修改</p>
<pre class="lang:java decode:true ">//设置文字大小 ，大小只能传像素值
        textView.setTextSize(67);
//设置颜色，三种方式。
        textView.setTextColor(0xff00ff00);
        textView.setTextColor(Color.BLUE);
        textView.setTextColor(Color.argb(0x99, 0xff, 0x00, 0x00));
// 通过values中的color中设置的颜色来设定。
        int color = getResources().getColor(R.color.red);
        textView.setTextColor(color);</pre>

<p>（2）文本的链接</p>
<p>将文本中的电话号码，Email，URL等设置为链接。对这个的设置叶有两种方式：一种是在layout中的xml文件中进行添加；另一种是在Activity的onCreate方法中添加代码。</p>
<p>xml文件设置</p>
<p>链接设置可以设置为：all， map, none, email, phone以及web。在这我们以设置为phone为例。 (电话号码是随便编的哟……)</p>
<pre class="lang:xhtml decode:true "> &lt;TextView
            android:id="@+id/textView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView:13314121514"
            android:autoLink="phone"/&gt;</pre>

<p>Activity中的修改</p>
<pre class="lang:java decode:true ">//      设置连接方式，文字必须在其后面。
        textView.setAutoLinkMask(Linkify.ALL);
        textView.setText("TextView:13314121514");</pre>

<p>（3）添加图片</p>
<p>可以在TextView中添加图片，通过在layout中的布局文件中添加，添加的过程同时也设置了图片字TextView中的位置，如下设置的是在其顶部：</p>
<pre><code>android:drawableTop=&quot;@mipmap/communication&quot;
`&lt;/pre&gt;

也可以修改图片上下所占的间距，通过如下代码：

&lt;pre&gt;`android:drawablePadding=&quot;10sp&quot;
`&lt;/pre&gt;

（4）文本的省略显示

之前我记得我第一部智能手机在收到短信的时候，如果我在其他应用中，短信的内容如果过长机会再我手机的系统标题栏上滚动显示，那其实就是一种对文本过长的处理。

在TextView中可以设置 android:ellipsize属性就行修改。android:ellipsize的属性值有marquee（滚动显示），end（末尾显示······），middle（中间显示······），none（不显示省略号，多余自动不显示）。

其中end， middle， none的设置很简单，只需要设置android:ellipsize=&quot;&quot;即可,但是滚动显示“marquee”还需要设置焦点，代码如下：

&lt;pre&gt;`android:ellipsize=&quot;marquee&quot;
android:focusable=&quot;true&quot;
android:focusableInTouchMode=&quot;true&quot;
android:singleLine=&quot;true&quot;
`&lt;/pre&gt;

（5）富文本

先说一下什么是富文本，富文本就是对文本中一些特殊文字或者图片的特殊显示。例如我们我们发一段话“你还没有还我100块钱。”这句话我们要强调“100块钱”这是后我们可以把它显示为特殊的颜色，这其实就是一种富文本。有时候我们QQ聊天经常发表情，其实这也是一种富文本。富文本，可以支持一部分的HTML，也可以动态添加的一些图片。

&lt;pre&gt;` textFu = (TextView) findViewById(R.id.textFu);
        Spanned spanned = Html.fromHtml(&quot;这是一个&amp;lt;font color=&apos;#00ffff&apos;&amp;gt;富文本&amp;lt;/font&amp;gt;,然后加一个图标&amp;lt;img src=&apos;a_merchant_06_click&apos;/&amp;gt;&quot;,
        new Html.ImageGetter() {
            @Override
            public Drawable getDrawable(String s) {
                int id = R.mipmap.ic_launcher;
                //方法一：通过反射获得s.
                Class clazz =R.mipmap.class;
                try {
                    Field field = clazz.getDeclaredField(s);
                    id = field.getInt(s);
                } catch (NoSuchFieldException e) {
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                }
                Drawable drawable = getResources().getDrawable(id);
                drawable.setBounds(0,0,drawable.getIntrinsicWidth(),drawable.getIntrinsicHeight());
            }
        },null);
        textFu.setText(spanned);
        textFu.setPaintFlags(Paint.STRIKE_THRU_TEXT_FLAG);

textFu = (TextView) findViewById(R.id.textFu);
        Spanned spanned = Html.fromHtml(&quot;这是一个&amp;lt;font color=&apos;#00ffff&apos;&amp;gt;富文本&amp;lt;/font&amp;gt;,然后加一个图标&amp;lt;img src=&apos;a_merchant_06_click&apos;/&amp;gt;&quot;,
        new Html.ImageGetter() {
            @Override
            public Drawable getDrawable(String s) {
                //方法二，直接通过R.mipmap.a_merchant_06_click，得到图片。
                Drawable drawable = getResources().getDrawable(R.mipmap.a_merchant_06_click);
                drawable.setBounds(0,0,drawable.getIntrinsicWidth(),drawable.getIntrinsicHeight());
                return drawable;
            }
        },null);
        textFu.setText(spanned);
        textFu.setPaintFlags(Paint.STRIKE_THRU_TEXT_FLAG);
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/android/">android</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 Tony
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 21;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>

  </div>
</body>
</html>